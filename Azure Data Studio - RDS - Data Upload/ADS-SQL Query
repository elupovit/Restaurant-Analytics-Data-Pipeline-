USE OrdersDW;
GO

-- DROP TABLES IF THEY EXIST (optional cleanup)
IF OBJECT_ID('dbo.raw_order_items') IS NOT NULL DROP TABLE dbo.raw_order_items;
IF OBJECT_ID('dbo.raw_order_item_options') IS NOT NULL DROP TABLE dbo.raw_order_item_options;
IF OBJECT_ID('dbo.raw_date_dim') IS NOT NULL DROP TABLE dbo.raw_date_dim;

-- Create raw_order_items table
CREATE TABLE dbo.raw_order_items (
    import_id INT IDENTITY(1,1) PRIMARY KEY,
    APP_NAME NVARCHAR(MAX) NULL,
    RESTAURANT_ID NVARCHAR(MAX) NULL,
    CREATION_TIME_UTC NVARCHAR(MAX) NULL,
    ORDER_ID NVARCHAR(MAX) NULL,
    USER_ID NVARCHAR(MAX) NULL,
    PRINTED_CARD_NUMBER NVARCHAR(MAX) NULL,
    IS_LOYALTY NVARCHAR(MAX) NULL,
    CURRENCY NVARCHAR(MAX) NULL,
    LINEITEM_ID NVARCHAR(MAX) NULL,
    ITEM_CATEGORY NVARCHAR(MAX) NULL,
    ITEM_NAME NVARCHAR(MAX) NULL,
    MENU_ID NVARCHAR(MAX) NULL,
    PRICE NVARCHAR(MAX) NULL,
    QUANTITY NVARCHAR(MAX) NULL,
    __done BIT NULL
);

-- Create raw_order_item_options table
CREATE TABLE dbo.raw_order_item_options (
    ORDER_ID NVARCHAR(MAX) NULL,
    LINEITEM_ID NVARCHAR(MAX) NULL,
    OPTION_LINEITEM_ID NVARCHAR(MAX) NULL,
    OPTION_NAME NVARCHAR(MAX) NULL,
    OPTION_PRICE NVARCHAR(MAX) NULL,
    OPTION_QUANTITY NVARCHAR(MAX) NULL,
    __done BIT NULL
);

-- Create raw_date_dim table
CREATE TABLE dbo.raw_date_dim (
    date_key NVARCHAR(MAX) NULL,
    year NVARCHAR(MAX) NULL,
    month NVARCHAR(MAX) NULL,
    week NVARCHAR(MAX) NULL,
    day_of_week NVARCHAR(MAX) NULL,
    is_weekend NVARCHAR(MAX) NULL,
    is_holiday NVARCHAR(MAX) NULL,
    holiday_name NVARCHAR(MAX) NULL
);




